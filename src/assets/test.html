<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Iframe test</title>
</head>

<body style="height: 100%;">
  <div id="titolo">CHAT IONIC TEST PAGE</div>

  <div class="event-wrp" id="onThemeColor">
    <span class="badge">EVENT</span>
    <label>themeColor LIGHT</label>
    <label class="switch">
      <input type="checkbox" name="themeColor" onclick="onCLickThemeColor(this)">
      <span class="slider round"></span>
    </label>
  </div>

  <iframe id="myIFrame" frameBorder="0" width="100%" style="display: flex; height: 95vh" onload="onLoad()"
    src="http://localhost:8080/#/conversation-detail?tiledesk_supportMode=true&jwt=JWT eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NWM1ZjM1OTlmYWYyZDA0Y2Q3ZGE1MjgiLCJlbWFpbCI6Imdpb3Zhbm5pQHRpbGVkZXNrLmNvbSIsImZpcnN0bmFtZSI6Ikdpb3Zhbm5pIiwibGFzdG5hbWUiOiJUcm9pc2kgQWRtIiwiZW1haWx2ZXJpZmllZCI6dHJ1ZSwiaWF0IjoxNzY0NjAyMTQxLCJhdWQiOiJodHRwczovL3RpbGVkZXNrLmNvbSIsImlzcyI6Imh0dHBzOi8vdGlsZWRlc2suY29tIiwic3ViIjoidXNlciIsImp0aSI6IjIwNzZjYmMxLTI0NzgtNGU4MC1iZjFmLTBiZTA3MTQ3MjQ3MSJ9.R60xZC5M2n-hc-mRIMpA9KaUFxnBQHA_FrLyL9cCiqxeCitfCfbfA3_EKXWbWg3rDztmOR7SVjEO8Gyw_hdhKyjpx-OpaDAILw0dSsuBHB0R4h0F4fN2J_JJ60UIItXxoAq1AI9ML2cRGoRNAtfl6PMjpHXdbpdBAGcBYoGqGv3xWPlM7wOdIhGasnWT932DiscF3I_ltcFkS3naebQQfsgztlbU-UF7EcFjDc-mMzMxqnE1MYKzyqUAR9J9zFmqiUlCsl_J0TNhAjqUw-0GHXpzLQJN9dutVyH4y_MZxt_p6qAIzNo9LpMi-a5bfvQvpJjSuc9POvmlmWFAmwoQGw"
    allow="autoplay; fullscreen; geolocation; microphone; camera; display-capture; encrypted-media; clipboard-read; clipboard-write;"
    loading="eager" importance="high">
  </iframe>
  
  <script>        
    // window.addEventListener('message', event => {
    //     console.log('[CHAT-IONIC] test page event::', event)
    // });

    function onLoad(){
      // var cssLink = document.createElement("style");
      // cssLink.src = "./assets/style.css"; 
      // // cssLink.rel = "stylesheet"; 
      // cssLink.type = "text/css"; 
      // console.log('framessss', frames['myIFrame'])
      // frames['myIFrame'].contentWindow.document.body.appendChild(cssLink);

      // let msg= { action: "style", type: 'light', parameter: 'http://localhost:8080/assets/customStyle.css'}
      // frames['myIFrame'].contentWindow.postMessage(msg, '*');
    }


    function onCLickThemeColor(event){
      console.log('onCLickThemeColor: status-->',event.checked);
      if(event.checked){
        let msg= { action: "style", type: 'style-1', parameter: 'http://localhost:8080/assets/customStyle.css'}
        frames['myIFrame'].contentWindow.postMessage(msg, '*');
      }else{
        let msg= { action: "style", parameter: ''}
        frames['myIFrame'].contentWindow.postMessage(msg, '*');
      }
    }

  </script>
</body>

</html>